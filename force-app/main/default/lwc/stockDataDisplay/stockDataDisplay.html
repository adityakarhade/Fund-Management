<template>
    <lightning-card title="Stock Data" icon-name="utility:chart">
        <div class="slds-m-around_medium">

                <div style="display: flex; flex-direction:column; gap: 1rem;">
                    <div>
                        <lightning-input label="Enter Stock Symbol" style="width: 300px;" value={symbol} data-id="stockSymbolInput" placeholder="Search a stock by its symbol such as 'AAPL'"></lightning-input>
                    </div>
                    <div>
                        <lightning-button label="Search" variant="brand" onclick={handleSymbolClick}></lightning-button>
                    </div>
                </div>
            
             <template if:true={stockdata}>
                
                <template for:each={stockdata} for:item="stock">
                    
                    <div key={stock.symbol} class="slds-m-top_small">
                        <div class="table-container" style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                                <thead>
                                    <tr>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Symbol</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Price</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Open</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">High</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Low</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Volume</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Latest Trading Day</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Previous Close</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Change</th>
                                        <th style="width: 10%; padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">Change Percent</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.symbol}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.price}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.open}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.high}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.low}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.volume}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.latestTradingDay}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.previousClose}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.change}</td>
                                        <td style="padding: 8px; border: 1px solid #ddd; word-wrap: break-word;">{stock.changePercent}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                   </div>
                </template>
             </template> 
            
            <template if:true={error}>
                <p class="slds-text-color_error">{error.body.message}</p>
            </template>
        </div>
    </lightning-card>
</template>